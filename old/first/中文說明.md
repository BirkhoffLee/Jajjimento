# 風紀委員

Jajjimento (ジャッジメント) 在日文中意味著風紀委員，

這是個給 PHP 用來驗證表單的功能，而且用法簡單，

也支援 *預先規則*，所以同樣的規則你不需要寫兩次。

**而 False 會被回傳一旦驗證失敗。**

# 使用方法

風紀委員是個類別所以你必須先建置他。

```php
/** 如果你沒有打算使用「預先規則」 */
new Jajjimento();

/** 如果你有「預先規則」你就必須先填滿三個參數，稍後會提及 */
new Jajjimento($_POST, '使用者', '建立');
```

# 範例

當你想要驗證一個 $_POST['Username'] 還有限定長度。

```php
$Jajjimento->Source($_POST)
           ->Add('Username', 'Length', true, 3, 30, 'a-Z0-9')
           ->Check();
```

## 首先 - 設定來源或是不要。

來源可以是 `$_POST` 或是 `$_GET` 或者一個 *陣列*,

你可以設為 **手動** 如果你的來源是動態的，或是未知的來源。

```php
/** 設置一個來源 */
$Jajjimento->Source($_POST);

/** 或是設置為手動 */
$Jajjimento->Manual();
```

## 接下來 - 新增規則。

是時候讓風紀委員知道怎麼檢查你的來源了。

```php
$Jajjimento->Add($Field, $Type, $Required, $Min, $Max=null, $StringFormat=null, $Trim=true)
```

### $Field

一個欄位應該要是你設置來源中的 `主鍵`，

如果你先前設置為手動模式，這個則會直接被當成來源。

```php
/** 用起來像這樣，如果你有設置來源 */
$Jajjimento->Add('Username' ..

/** 或者直接當作來源使用，如果你先前設置手動模式 */
$Jajjimento->Add($TheValueShouldCheck ..
```

### $Type

驗證的種類，這裡是清單。
                
1.**Length 長度**
 
*（`$Min` 和 `$Max` 現在會成為字串的長度限制。）*

2.**Range 範圍**

*（`$Min` 和 `$Max` 現在會成為數字的範圍限制。）*

3.**Date 日期+**
 
*（`$Min` 現在會成為日期的格式例 `YYYY-MM-DD` 或 `MM-DD-YYYY`。）*

4.**Switch 清單++**

*（`$Min` 現在應該要是個陣列，然後值應該要在陣列內。）*

5.**Email 電子郵件地址++**

6.**Gender 性別++**

*（o(ther) 和 m(ale) 還有 f(emal) 只有這些會被接受。）*

7.**IP++**

8.**URL 網址++**

***+: `$Max` 在這種類別中不可用。***

***++: `$Min` 和 `$Max` 在這種類別中不可用。***

```php
$Jajjimento->Add('Username', 'Date' ..
```

### $Require

設置為 True 如果這個欄位是必填的。**這是最高優先權。**

```php
$Jajjimento->Add('Username', 'Date', true ..
```

### $StringFormat

用來限制字串的格式。

1. a-Z
2. A-Z
3. 0-9
4. a-Z0-9
5. A-Z0-9
6. a-Z0-9~
7. Lang~
8. Lang


```php
$Jajjimento->Add('Username', 'Date', true, 'a-Z' ..
```

### $Trim

移除字串最後的空白。

```php
$Jajjimento->Add('Username', 'Date', true, 'a-Z', .. true);
```

## 最後 - 驗證。

一旦你好了，你就可以這樣驗證你的規則。

```php
$Jajjimento->Check();

/** 或者你正在使用預先規則 */
$Jajjimento->PreCheck('主要種類', '子種類');
```

## 當「艾拉」存在的時候

如果你有 [艾拉](http://github.com/TeaMeow/Aira) 來協助你處理錯誤，

那麼你應該將此這為 True（預設為 False。）。

```php
$Jajjimento->HasAira = true;
```

接下來， `Aira::Add('INCORRECT_FORM')` 將會在驗證失敗時被呼叫。

## 使用預先規則

預先規則是設計給那些可能會重複使用同種規則的人，

它位於 `jajjimento-rules/rules.php`，基本上大概是這樣，

**第一**，你必須要有個主要種類例如 'User' 或 'Post'。

*第二*，你必須要有個子種類例如 'Create' 或 'Remove'。

```php
$Post = [
         'Create' => [
                        ['Content', 'Length', true, 1, 65535]
                     ]
        ];

$User = [
         'Remove' => [
                        ['Username', 'Length', true, 1, 30],
                        ['Password', 'Length', true, 4, 80]
                     ]
        ];
```

下一次你就可以直接這樣呼叫風紀委員。

```php
new Jajjimento($_POST, 'User', 'Remove');
```

這將會直接引用你之前設置的規則。
